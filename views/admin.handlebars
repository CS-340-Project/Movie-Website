<main id="admin-holder">
<div id="post-nav">
  <h1 id="site-title"> Kernel</h1>
   <div id="navbar">
        <a href="/userProfile"> Reviews</a>
        <a href="/search">Search</a>
        <a href="/media">All Media</a>
    </div>
</div>
  <div id="all-admin">
    <h2 id="admin-header">Admin</h2>
<div id="tv-div-container">   
<div id="tv-div">
<h3 id="add-tv-show-header">Add Visual Media</h3>
	<form id="addperson" action="/admin" method="post">
      <input type="text" name="vm_title" id="tv-title-field" class="add-tv-form-field" pattern=".{1.}" required placeholder="Title">
      <input type="number" name="seasons" id="tv-seasons-field" class="add-tv-form-field" pattern=".{1.}" required placeholder="Number of Seasons">
      <input type="number" name="episodes" id="tv-episodes-field" class="add-tv-form-field" pattern=".{1.}" required placeholder="Number of Episodes">
      <input type="text" name="summary" id="tv-summary-field" class="add-tv-form-field" pattern=".{1.}" required placeholder="Summary">
	<input type="text" name="img_url" id="img_url-field" class="add-tv-form-field" pattern=".{1.}" required placeholder="Image URL">
      <input type="submit" value="Add Media" id="add-tv-form-submit">
</form>   
</div>
<div id = "media-table">
<h3 id="current-title"> Current Media:</h3>
<table is="all-table">
	<div id="media-updater">
	<thread>
		<th id="title-media"> Media Title</th>
	</thread>
	<tbody>
		{{#each media}}
		<tr>
			<td id="name-media">{{vm_title}}</td>
			<td id="update-link"><a href="/admin/{{id}}">Update</a></td>
			<td id="delete-link"><button onclick="deleteMedia({{id}})">Delete</button></td>
		</tr>
		{{/each}}
	</tbody>
	</div>
</table>
</div>
</div>
</div>
 </main>
<script>
	document.getElementById("tv-title-field").addEventListener("invalid", myFunction);
	document.getElementById("tv-seasons-field").addEventListener("invalid", myFunction);
	document.getElementById("tv-episodes-field").addEventListener("invalid", myFunction);
	document.getElementById("tv-summary-field").addEventListener("invalid", myFunction);
	document.getElementById("img_url-field").addEventListener("invalid", myFunction);

	function myFunction() {
  		alert("Must at least contain input");
	}

function deleteMedia(id){
    $.ajax({
        url: '/admin/' + id,
        type: 'DELETE',
        success: function(result){
            window.location.reload(true);
        }
    })
};
</script>
